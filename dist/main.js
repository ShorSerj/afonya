(()=>{"use strict";const e={create(e){const t=document.createElement("li"),a=document.createElement("input");a.classList.add("param__checkbox"),a.setAttribute("type","checkbox"),a.setAttribute("id","checkbox");const n=document.createElement("div");n.classList.add("param__checkbox-mark");const r=document.createElement("label");return r.classList.add("param__checkbox-label"),r.setAttribute("for","checkbox"),r.innerHTML=e,t.append(a),t.append(n),t.append(r),t}},t={create(t,a){const n=document.createElement("li");n.classList.add("param");const r=document.createElement("div");r.classList.add("param__title");const s=document.createElement("div");s.classList.add("param__title-text"),s.innerHTML=t;const c=document.createElement("div");c.classList.add("param__icon"),c.innerHTML="&times;";const i=document.createElement("div");i.classList.add("param__options-wrapper");const l=document.createElement("ul");l.classList.add("param__options"),a.forEach((t=>{l.append(e.create(t))}));const o=document.createElement("div");o.classList.add("param__accept");const p=document.createElement("p");return p.innerHTML="Применить",r.append(s),r.append(c),i.append(l),i.append(o),o.append(p),n.append(r),n.append(i),r.addEventListener("click",(function(e){i.classList.toggle("param__options-wrapper_visible"),c.classList.toggle("param__icon_visible")})),n}},a=e=>new Promise((function(t,a){const n=new XMLHttpRequest;n.open("GET",`https://afternoon-mesa-71443.herokuapp.com/${e}`),n.responseType="json",n.setRequestHeader("Content-Type","application/json"),n.send(),n.onload=function(){200!=n.status?alert(`Ошибка ${n.status}: ${n.statusText}`):t(n.response)},n.onerror=function(){alert("Запрос не удался")}})).then(),n={create(e,t){const a=document.createElement("li");a.classList.add("param");const n=document.createElement("div");n.classList.add("param__title");const r=document.createElement("div");r.classList.add("param__title-text"),r.innerHTML=e;const s=document.createElement("div");s.classList.add("param__slider-wrapper");const c=document.createElement("div");c.classList.add("param__slider-track");const i=document.createElement("input");i.setAttribute("type","range"),i.setAttribute("min",t.min_value),i.setAttribute("max",t.max_value),i.setAttribute("value",t.min_value),i.oninput=function(){m()};const l=document.createElement("input");l.setAttribute("type","range"),l.setAttribute("min",t.min_value),l.setAttribute("max",t.max_value),l.setAttribute("value",t.max_value),l.oninput=function(){_()};const o=document.createElement("div");o.classList.add("param__slider-values");const p=document.createElement("input");p.classList.add("param__slider-value"),p.oninput=function(){m(p.value)},p.setAttribute("placeholder",t.min_value);const u=document.createElement("input");u.classList.add("param__slider-value"),u.oninput=function(){_(u.value)},u.setAttribute("placeholder",t.max_value),o.append(p),o.append(u),n.append(r),a.append(n),s.append(c),s.append(i),s.append(l),a.append(s),a.append(o);let d=i.max;function m(e,t=null){e&&(i.value=e),parseInt(l.value)-parseInt(i.value)<=0&&(i.value=parseInt(l.value)-0),d=i.max,!t&&(p.value=i.value),v()}function _(e,t=null){e&&(l.value=e),parseInt(l.value)-parseInt(i.value)<=0&&(l.value=parseInt(i.value)+0),!t&&(u.value=l.value),d=i.max,v()}function v(){let e=i.value/d*100,t=l.value/d*100;c.style.background=`linear-gradient(to right, #B2B2B2 ${e}% , #0F74D1 ${e}% , #0F74D1 ${t}%, #B2B2B2 ${t}%)`}return m(null,!0),_(null,!0),a}},r=document.querySelector(".filter__title"),s=document.querySelector(".filter__arrow"),c=document.querySelector(".filter-wrapper"),i=document.querySelector(".filter__more");i.innerHTML="Показать больше параметров (12)";const l=document.querySelector(".filter__max-filter");new Promise((function(e){e(a("data-min"))})).then((function(e){const a=document.querySelector(".filter__min-filter");e.params.forEach((e=>{const n=t.create(e.title,e.options);a.append(n)}))})),r.addEventListener("click",(function(){s.classList.toggle("filter__arrow_up"),c.classList.toggle("filter-wrapper")})),document.addEventListener("click",(function(e){document.querySelectorAll(".param__options-wrapper_visible")?.forEach((t=>{t.closest(".param")!==e.target.closest(".param")&&(t.classList.remove("param__options-wrapper_visible"),t.closest(".param").querySelector(".param__icon_visible").classList.remove("param__icon_visible"))}))})),i.addEventListener("click",(function(){l.classList.toggle("filter__max-filter_visible"),i.classList.toggle("filter__more-max"),"filter__more filter__more-max"==i.className?i.innerHTML="Показать меньше параметров (12)":i.innerHTML="Показать больше параметров (12)",l.children.length<1&&new Promise((function(e){e(a("data-max"))})).then((function(e){const a=document.querySelector(".filter__max-filter");e.params.forEach((e=>{if(e.options?.min_value){const t=n.create(e.title,e.options);a.append(t)}else{const n=t.create(e.title,e.options);a.append(n)}}))}))}))})();
//# sourceMappingURL=main.js.map